import{r as t,c as i,h as n,d as e,H as a}from"./p-8e613b55.js";import{g as r}from"./p-9c687761.js";import{c as o}from"./p-7840618d.js";const s=class{constructor(n){t(this,n),this.fireenjinFetch=i(this,"fireenjinFetch",7),this.fireenjinReset=i(this,"fireenjinReset",7),this.fireenjinSubmit=i(this,"fireenjinSubmit",7),this.fireenjinValidation=i(this,"fireenjinValidation",7),this.componentIsLoaded=!1,this.formData={},this.submitButton="Save",this.submitButtonColor="primary",this.submitButtonFill="solid",this.resetButton="Cancel",this.resetButtonColor="dark",this.resetButtonFill="clear",this.hideControls=!1,this.excludeData=[],this.disableLoader=!1,this.loading=!1,this.disableEnterButton=!1,this.disableReset=!1,this.confirmExit=!1,this.hasChanged=!1}onInput(t){t&&t.target&&t.target.name&&!t.target.name.startsWith("ion-")&&0===(this.excludeData?this.excludeData:[]).filter((i=>i===t.target.name)).length&&(this.setByPath(this.formData,t.target.name,t.target.value),this.componentIsLoaded&&!this.hasChanged&&(this.hasChanged=!0))}onSelect(t){t&&t.target&&t.target.name&&0===(this.excludeData?this.excludeData:[]).filter((i=>i===t.target.name)).length&&(this.formData[t.target.name]=t.target.value,this.componentIsLoaded&&!this.hasChanged&&(this.hasChanged=!0))}async onKeyDown(t){"Enter"===t.key&&await this.checkFormValidity()&&this.submitButtonEl&&!this.disableEnterButton&&this.submitButtonEl.click()}async onSuccess(t){var i;t.detail.target===this.fireenjinFormEl&&this.findDataMap&&(this.formData=await this.mapFormData(this.findDataMap,(null===(i=t.detail)||void 0===i?void 0:i.data)?t.detail.data:{}),await this.setFormData(this.formData))}async setLoading(t){this.loading=!!t}async submit(t,i={manual:!1}){t&&t.preventDefault(),await this.checkFormValidity(),this.loading=!this.disableLoader;const n=this.beforeSubmit&&"function"==typeof this.beforeSubmit?await this.beforeSubmit(this.formData,i):this.formData;this.fireenjinSubmit.emit({event:t,id:this.documentId,endpoint:this.endpoint,data:n,name:this.name}),this.hasChanged=!1}async reset(t){if(!t)return this.formEl.reset(),!1;this.formData={},this.fireenjinReset.emit({event:t,id:this.documentId,endpoint:this.endpoint,data:this.formData,name:this.name}),this.hasChanged=!1}async checkFormValidity(t=!0){let i=!0;const n=[].slice.call(this.formEl.querySelectorAll("fireenjin-input"));for(const e of n)await e.checkValidity(t?null:{validationClassOptions:{ignoreInvalid:!0}})||(i&&t&&await e.reportValidity(),i=!1);return i}async reportFormValidity(){const t=await this.checkFormValidity(!1);this.fireenjinValidation.emit({event,isValid:t,name:this.name}),this.submitButtonEl&&(this.submitButtonEl.disabled=!t)}async setFormData(t){this.formEl.querySelectorAll("[data-fill]").forEach((i=>{var n,e;const a=(null===(e=null===(n=i.dataset)||void 0===n?void 0:n.fill)||void 0===e?void 0:e.length)>0?i.dataset.fill:i.name;i.value=this.getByPath(t,a)})),this.formData=t}async mapFormData(t,i){let n=i||{};if(t){const e=Object.keys(t);for(const a of e)t[a]?n[t[a]]=i[a]:n=Object.assign(Object.assign({},n),i[a])}return n}getByPath(t,i){for(var n=(i=(i=i.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),e=0,a=n.length;e<a;++e){var r=n[e];if(!(r in t))return;t=t[r]}return t}setByPath(t,i,n){const e=i.split("."),a=e.length;for(let i=0;i<a-1;i++){const n=e[i];t[n]||(t[n]={}),t=t[n]}t[e[a-1]]=n}componentDidLoad(){setTimeout((()=>{this.componentIsLoaded=!0}),2e3),this.findEndpoint&&this.documentId&&this.fireenjinFetch.emit({endpoint:this.findEndpoint,params:Object.assign(Object.assign({},this.findParams?this.findParams:{}),{id:this.documentId})}),this.formData&&this.setFormData(this.formData)}render(){return n("form",{ref:t=>this.formEl=t,name:this.name,id:this.name,action:this.endpoint,method:this.method,onReset:t=>this.reset(t),onSubmit:t=>this.submit(t),class:{"is-loading":this.loading}},n("slot",null),!this.hideControls&&n("ion-grid",{class:"form-controls"},n("ion-row",null,n("ion-col",null,this.resetButton?n("ion-button",{ref:t=>this.resetButtonEl=t,type:"reset",fill:this.resetButtonFill,color:this.resetButtonColor,innerHTML:this.resetButton}):null),n("ion-col",null,this.submitButton?n("ion-button",{ref:t=>this.submitButtonEl=t,type:"submit",color:this.submitButtonColor,fill:this.submitButtonFill,innerHTML:this.submitButton}):null))))}get fireenjinFormEl(){return e(this)}};s.style="fireenjin-form{display:block}fireenjin-form .form-controls{opacity:1;pointer-events:all;transition:all ease-out 0.4s}fireenjin-form .form-controls ion-col:last-of-type{display:flex;flex-direction:row;justify-content:flex-end}fireenjin-form .is-hidden{opacity:0;pointer-events:none;height:0px}";const d=class{constructor(n){t(this,n),this.fireenjinFetch=i(this,"fireenjinFetch",7),this.disabled=!1,this.cancelText="Dismiss",this.okText="Okay",this.multiple=!1,this.interface="alert",this.interfaceOptions={},this.limit=15,this.options=[],this.results=[]}onSuccess(t){var i,n,e;"select"===(null===(i=null==t?void 0:t.detail)||void 0===i?void 0:i.name)&&t.detail.endpoint===this.endpoint&&(this.results=(null===(e=null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.data)||void 0===e?void 0:e.results)?t.detail.data.results:[],setTimeout((()=>{this.value=this.value}),200))}fetchData(){this.endpoint&&this.fireenjinFetch.emit({name:"select",endpoint:this.endpoint,dataPropsMap:this.dataPropsMap?this.dataPropsMap:this.resultsKey?{[this.resultsKey]:"results"}:null,params:Object.assign({data:Object.assign(Object.assign(Object.assign({},this.query?{query:this.query}:{}),this.orderBy?{orderBy:this.orderBy}:{}),{limit:this.limit?this.limit:15})},this.params?this.params:{})})}componentWillLoad(){this.fetchData()}render(){return n(a,null,n("ion-item",null,this.icon&&n("ion-icon",{slot:"start",name:this.icon}),this.label&&n("ion-label",{position:this.labelPosition},this.label),n("ion-select",{disabled:this.disabled,selectedText:this.selectedText,interface:this.interface,compareWith:this.compareWith,name:this.name,value:this.value,okText:this.okText,multiple:this.multiple,cancelText:this.cancelText,placeholder:this.placeholder,interfaceOptions:this.interfaceOptions?this.interfaceOptions:{header:this.header,subHeader:this.subHeader,message:this.message}},(this.options?this.options:[]).map((t=>this.optionEl?this.optionEl(t):n("ion-select-option",{value:t.value,disabled:t.disabled},t.label))),(this.results?this.results:[]).map((t=>this.optionEl?this.optionEl(t):n("ion-select-option",{value:t.id},t.name))))))}get selectEl(){return e(this)}};d.style="fireenjin-select ion-icon{margin-right:5px;color:var(--ion-text-color);opacity:0.33}";const l=class{constructor(i){t(this,i),this.sticky=!1}render(){const t=r(this);return n(a,{class:o(this.color,{[t]:!0,"item-divider-sticky":this.sticky,item:!0})},n("slot",{name:"start"}),n("div",{class:"item-divider-inner"},n("div",{class:"item-divider-wrapper"},n("slot",null)),n("slot",{name:"end"})))}get el(){return e(this)}};l.style={ios:":host{--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--inner-padding-top:0px;--inner-padding-end:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:flex;align-items:center;justify-content:space-between;width:100%;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);overflow:hidden;z-index:100;box-sizing:border-box}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.item-divider-sticky){position:sticky;top:0}.item-divider-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--inner-padding-start);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:flex;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;min-height:inherit;border:0;overflow:hidden}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-divider-inner{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end))}}.item-divider-wrapper{display:flex;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;text-overflow:ellipsis;overflow:hidden}:host{--background:var(--ion-color-step-100, #e6e6e6);--color:var(--ion-color-step-850, #262626);--padding-start:20px;--inner-padding-end:10px;border-radius:0;position:relative;min-height:28px;font-size:17px;font-weight:600}:host([slot=start]){margin-left:0;margin-right:20px;margin-top:2px;margin-bottom:2px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host([slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:20px;margin-inline-end:20px}}:host([slot=end]){margin-left:10px;margin-right:10px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host([slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px}}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(h1){margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}::slotted(h2){margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}::slotted(h3),::slotted(h4),::slotted(h5),::slotted(h6){margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}::slotted(p){margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4);font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}::slotted(h2:last-child) ::slotted(h3:last-child),::slotted(h4:last-child),::slotted(h5:last-child),::slotted(h6:last-child),::slotted(p:last-child){margin-bottom:0}",md:":host{--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--inner-padding-top:0px;--inner-padding-end:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:flex;align-items:center;justify-content:space-between;width:100%;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);overflow:hidden;z-index:100;box-sizing:border-box}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.item-divider-sticky){position:sticky;top:0}.item-divider-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--inner-padding-start);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:flex;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;min-height:inherit;border:0;overflow:hidden}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-divider-inner{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end))}}.item-divider-wrapper{display:flex;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;text-overflow:ellipsis;overflow:hidden}:host{--background:var(--ion-background-color, #fff);--color:var(--ion-color-step-400, #999999);--padding-start:16px;--inner-padding-end:0;min-height:30px;border-bottom:1px solid var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));font-size:14px}::slotted([slot=start]){margin-right:32px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted([slot=start]){margin-right:unset;-webkit-margin-end:32px;margin-inline-end:32px}}::slotted([slot=end]){margin-left:32px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted([slot=end]){margin-left:unset;-webkit-margin-start:32px;margin-inline-start:32px}}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:13px;margin-bottom:10px}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:24px}:host(.ion-color) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){margin-right:32px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-right:unset;-webkit-margin-end:32px;margin-inline-end:32px}}::slotted(ion-icon[slot=end]){margin-left:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;-webkit-margin-start:16px;margin-inline-start:16px}}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;align-self:flex-start;font-size:11px}::slotted(ion-note[slot]){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-note[slot=start]){padding-right:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-note[slot=start]){padding-right:unset;-webkit-padding-end:16px;padding-inline-end:16px}}::slotted(ion-note[slot=end]){padding-left:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-note[slot=end]){padding-left:unset;-webkit-padding-start:16px;padding-inline-start:16px}}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){width:56px;height:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){margin-right:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){margin-right:unset;-webkit-margin-end:16px;margin-inline-end:16px}}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:unset;-webkit-margin-start:16px;margin-inline-start:16px}}::slotted(h1){margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}::slotted(h2){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}::slotted(h3,h4,h5,h6){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}::slotted(p){margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;color:var(--ion-color-step-600, #666666);font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}"};export{s as fireenjin_form,d as fireenjin_select,l as ion_item_divider}